apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
# NOTE: limitador-servicemonitor.yaml (Limitador) is NOT included here.
# When Kuadrant CR has spec.observability.enable=true, the operator creates its own
# PodMonitor (kuadrant-limitador-monitor). Deploying our ServiceMonitor would cause
# duplicate metrics. The install-observability.sh script conditionally deploys it
# only when Kuadrant observability is disabled.
#
# NOTE: authorino-server-metrics-servicemonitor.yaml is also conditional â€” deployed
# by install-observability.sh only when no existing monitor scrapes /server-metrics.
- gateway-telemetry-policy.yaml
- istio-gateway-telemetry.yaml
- istio-gateway-service.yaml
- istio-gateway-servicemonitor.yaml

labels:
- pairs:
    app.kubernetes.io/part-of: maas-observability
